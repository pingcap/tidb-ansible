# TiKV config template
#  Human-readable big numbers:
#   File size(based on byte): KB, MB, GB, TB, PB
#    e.g.: 1_048_576 = "1MB"
#   Time(based on ms): ms, s, m, h
#    e.g.: 78_000 = "1.3m"

# log level: trace, debug, info, warn, error, off.
log-level = "info"
# file to store log, write to stderr if it's empty.
# log-file = ""

[server]
{% for item, value in tikv_conf.server | dictsort -%}
{% if item == "labels" %}
{{ item }} = {{ value | tikv_server_labels_format }}
{% else %}
{{ item }} = {{ value | to_json }}
{% endif %}
{% endfor %}

[storage]
{% for item, value in tikv_conf.storage | dictsort -%}
{{ item }} = {{ value | to_json }}
{% endfor %}

[pd]
# This section will be overwritten by command line parameters
{% for item, value in tikv_conf.pd | dictsort -%}
{{ item }} = {{ value | to_json }}
{% endfor %}

[metric]
{% for item, value in tikv_conf.metric | dictsort -%}
{{ item }} = {{ value | to_json }}
{% endfor %}

[raftstore]
{% for item, value in tikv_conf.raftstore | dictsort -%}
{{ item }} = {{ value | to_json }}
{% endfor %}

[rocksdb]
{% for item, value in tikv_conf.rocksdb | dictsort_by_value_type -%}
{% if value is not mapping -%}
{{ item }} = {{ value | to_json}}
{% else %}

[rocksdb.{{ item }}]
{% for sub_item, sub_value in value | dictsort -%}
{{ sub_item }} = {{ sub_value | to_json }}
{% endfor %}
{% endif %}
{% endfor %}

[raftdb]
{% for item, value in tikv_conf.raftdb | dictsort_by_value_type -%}
{% if value is not mapping -%}
{{ item }} = {{ value | to_json}}
{% else %}

[raftdb.{{ item }}]
{% for sub_item, sub_value in value | dictsort -%}
{{ sub_item }} = {{ sub_value | to_json }}
{% endfor %}
{% endif %}
{% endfor %}
